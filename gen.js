

/**
 * Generate random files and folders from
 * https://jaspervdj.be/lorem-markdownum/
 * 
 * Creates the number of folders and files specified in the command line arguments
 * With the files evenly distributed among the folders
 */

// use only built-in node modules
const fs = require('fs');
const path = require('path');


// get the command line argument of how many files to generate and how many folders using named arguments
const args = process.argv.slice(2);
const numFiles = args[0] || 100;
const numFolders = args[1] || 25;


// used for folder names
const loremIpsumString = `lorem ipsum egia solis erat sublimibus alta columnis clara micante auro flammasque imitante pyropo cuius ebur nitidum fastigia summa tegebat argenti bifores radiabant lumine valvae materiam superabat opus nam mulciber illic aequora caelarat medias cingentia terras terrarumque orbem caelumque quod imminet orbi caeruleos habet unda deos tritona canorum proteaque ambiguum ballaenarumque prementem aegaeona suis inmania terga lacertis doridaque et natas quarum pars nare videtur in mole sedens viridis siccare capillos pisce vehi quaedam facies non omnibus una diversa tamen qualem decet esse sororum terra viros urbesque gerit silvasque ferasque fluminaque nymphas cetera numina ruris haec super inposita est caeli fulgentis imago signaque sex foribus dextris totidemque sinistris quo simul adclivi clymeneia limite proles venit intravit dubitati tecta parentis protinus ad patrios sua fert vestigia vultus consistitque procul neque enim propiora ferebat lumina purpurea velatus veste sedebat solio phoebus claris lucente smaragdis a dextra laevaque dies mensis annus saeculaque positae spatiis aequalibus horae verque novum stabat cinctum florente corona nuda aestas spicea serta gerebat autumnus calcatis sordidus uvis glacialis hiems canos hirsuta ipse loco medius rerum novitate paventem sol oculis iuvenem quibus adspicit omnia vidit quae que viae tibi causa quid hac ait arce petisti progenies phaethon haud infitianda parenti ille refert o lux inmensi publica mundi phoebe pater si das usum mihi nominis huius nec falsa clymene culpam sub imagine celat pignora da genitor per tua vera propago credar hunc animis errorem detrahe nostris dixerat at circum caput omne micantes deposuit radios propiusque accedere iussit amplexuque dato tu meus negari dignus es veros edidit ortus quoque minus dubites quodvis pete munus ut illud me tribuente feras promissi testis adesto dis iuranda palus incognita vix bene desierat currus rogat paternos inque diem alipedum ius moderamen equorum paenituit iurasse patrem qui terque quaterque concutiens inlustre temeraria dixit vox mea facta utinam promissa liceret dare confiteor solum hoc nate negarem dissuadere licet tuta voluntas magna petis viribus istis munera conveniant tam puerilibus annis sors mortalis mortale optas plus etiam quam superis contingere possit nescius adfectas placeat sibi quisque licebit ignifero quisquam consistere axe valet excepto vasti rector olympi fera terribili iaculatur fulmina agat hos iove maius habemus ardua prima via qua mane recentes enituntur equi medio altissima caelo unde mare ipsi saepe videre fit timor pavida trepidat formidine pectus ultima prona eget moderamine certo tunc subiectis excipit undis ne ferar praeceps tethys solet ipsa vereri adde adsidua rapitur vertigine caelum sideraque trahit celerique volumine torquet nitor adversum vincit inpetus rapido contrarius evehor finge datos ages poterisne rotatis obvius ire polis te citus auferat axis forsitan lucos deorum concipias animo delubraque ditia donis insidias iter formasque ferarum vertice supposito festas palladis arces pura coronatis portabant sacra canistris inde revertentes deus ales iterque agit rectum sed curvat eundem volucris visis rapidissima miluus extis dum timet densi circumstant ministri flectitur gyrum longius audet abire spemque suam motis avidus circumvolat alis sic actaeas agilis cyllenius inclinat cursus easdem circinat auras quanto splendidior sidera fulget lucifer aurea tanto virginibus praestantior herse ibat eratque decus pompae comitumque suarum obstipuit forma natus aethere pendens secus exarsit cum balearica plumbum funda iacit volat incandescit eundo quos habuit nubibus invenit ignes vertit caeloque petit terrena relicto se dissimulat tanta fiducia formae quamquam iusta cura adiuvat illam permulcetque comas chlamydemque pendeat apte collocat limbus totumque adpareat aurum teres somnos ducit arcet virga sit tersis niteant talaria plantis pars secreta domus ebore testudine cultos tres thalamos quorum pandrose dextrum aglauros laevum medium possederat tenuit venientem notavit mercurium nomenque dei scitarier ausa causam adventus cui respondit atlantis pleionesque nepos ego sum iussa verba patris porto iuppiter ipse fingam causas tantum fida sorori velis prolisque meae matertera dici faveas oramus amanti isdem abdita nuper viderat flavae minervae proque ministerio magni ponderis postulat interea tectis excedere cogit vertit hanc torvi dea bellica luminis penitus traxit suspiria motu pariter positamque pectore forti aegida concuteret subit arcana profana detexisse manu tum sine matre creatam lemnicolae stirpem contra data foedera gratamque deo fore iam ditem sumpto avara poposcerat invidiae nigro squalentia tabo imis vallibus sole carens ulli pervia vento tristis ignavi plenissima frigoris igne vacet semper caligine abundet huc ubi pervenit belli metuenda virago constitit ante domum succedere fas postes extrema cuspide pulsat concussae patuere fores videt intus edentem vipereas carnes vitiorum alimenta suorum invidiam visaque oculos avertit illa surgit humo pigre semesarumque relinquit corpora serpentum passuque incedit inerti utque deam formaque armisque decoram ingemuit vultumque ac duxit pallor ore sedet macies corpore toto nusquam recta acies livent robigine dentes pectora felle virent lingua suffusa veneno risus abest nisi quem visi movere dolores fruitur somno vigilantibus excita curis ingratos intabescitque videndo successus hominum carpitque carpitur suppliciumque suum quamvis oderat talibus adfata breviter tritonia dictis infice tabe natarum cecropis unam ea plura locuta fugit inpressa tellurem reppulit hasta illa obliquo fugientem cernens murmura parva dedit successurumque indoluit baculumque capit spinea totum vincula cingebant adopertaque atris quacumque ingreditur florentia proterit arva exuritque herbas cacumina carpit adflatuque suo populos domosque polluit tandem tritonida conspicit arcem ingeniis opibusque festa pace virentem vixque tenet lacrimas quia nil lacrimabile cernit postquam cecrope natae facit pectusque ferrugine tincta tangit hamatis praecordia sentibus inplet inspiratque nocens virus piceumque ossa dissipat spargit pulmone venenum neve mali causae spatium latius errent germanam fortunatumque sororis coniugium pulchraque deum ponit cunctaque inritata dolore occulto mordetur anxia nocte luce gemit lentaque miserrima liquitur glacies incerto saucia felicisque bonis lenius uritur herses spinosis ignis supponitur herbis dant flammas lentoque vapore cremantur mori voluit quicquam tale videret velut crimen rigido narrare denique adverso limine sedit exclusura blandimenta precesque verbaque iactanti mitissima desine hinc motura repulso stemus pacto velox isto caelestique patefecit illi surgere conanti partes quascumque sedendo flectimur ignava nequeunt gravitate moveri quidem pugnat recto attollere trunco genuum iunctura riget frigusque ungues labitur pallent amisso sanguine venae malum late inmedicabile cancer serpere inlaesas vitiatis addere letalis hiems paulatim vitalesque vias respiramina clausit conata loqui fuisset vocis habebat saxum colla tenebat oraque duruerant signumque exsangue lapis albus mens infecerat has verborum poenas mentisque profanae cepit atlantiades dictas pallade linquit iactatis aethera pennis sevocat fassus amoris fide minister iussorum meorum pelle moram solitoque celer delabere cursu quaeque tuam matrem tellus parte sinistra suspicit indigenae sidonida nomine dicunt quodque montano gramine pasci armentum regale vides litora verte expulsi iamdudum monte iuvenci petunt filia regis ludere tyriis comitata solebat conveniunt sede morantur maiestas amor sceptri relicta rectorque trisulcis ignibus armata nutu concutit induitur faciem tauri mixtusque iuvencis mugit teneris formosus obambulat quippe color nivis duri calcavere pedis solvit aquaticus auster toris exstant armis palearia pendent cornua vara contendere possis puraque magis perlucida gemma nullae fronte minae formidabile lumen pacem miratur agenore nata proelia nulla minetur mitem metuit primo mox adit flores candida porrigit ora gaudet amans veniat sperata voluptas oscula dat manibus differt nunc adludit viridique exsultat herba latus fulvis niveum deponit harenis paulatimque metu dempto modo praebet virginea plaudenda sertis inpedienda novis regia virgo nescia premeret tergo considere siccoque litore sensim pedum primis abit ulterius mediique ponti praedam pavet litusque ablata relictum respicit cornum altera dorso tremulae sinuantur flamine vestes in nova animus mutatas dicere formas di coeptis vos mutastis illas adspirate meis primaque ab origine perpetuum deducite tempora carmen ante tegit unus naturae orbe dixere chaos rudis indigestaque moles pondus iners congestaque eodem iunctarum discordia semina nullus adhuc mundo praebebat titan crescendo reparabat circumfuso pendebat aere ponderibus librata bracchia longo margine terrarum porrexerat amphitrite pontus aer instabilis innabilis lucis egens nulli manebat obstabatque aliis aliud uno frigida pugnabant calidis umentia siccis mollia duris pondere habentia hanc melior litem natura diremit terris abscidit undas liquidum spisso secrevit evolvit caecoque exemit acervo dissociata locis concordi ligavit ignea convexi vis emicuit summaque locum fecit proximus levitate locoque densior his elementaque grandia pressa circumfluus umor possedit solidumque coercuit sic dispositam quisquis fuit congeriem secuit sectamque membra coegit principio terram aequalis omni foret speciem glomeravit orbis freta diffundi rapidisque tumescere ventis ambitae circumdare terrae addidit fontes stagna inmensa lacusque obliquis cinxit declivia ripis partim sorbentur perveniunt campoque recepta liberioris aquae pro pulsant extendi campos subsidere valles fronde tegi silvas lapidosos montes duae secant zonae quinta ardentior illis onus inclusum numero distinxit plagae tellure premuntur media habitabilis aestu nix duas totidem inter utramque locavit temperiemque mixta frigore flamma inminet levius onerosior igni nebulas nubes humanas tonitrua mentes fulminibus facientes fulgura ventos his passim fabricator habendum aera permisit obsistitur regat diverso flamina tractu quin lanient mundum fratrum eurus auroram nabataeaque regna recessit persidaque radiis iuga subdita matutinis vesper occiduo tepescunt proxima sunt zephyro scythiam septemque triones horrifer invasit boreas contraria adsiduis pluviaque madescit austro inposuit carentem terrenae faecis habentem vix ita limitibus dissaepserat certis diu fuerant caeca coeperunt effervescere neu regio ulla animalibus orba astra tenent caeleste formaeque cesserunt nitidis habitandae piscibus undae volucres agitabilis sanctius animal capacius altae deerat dominari posset homo sive divino semine opifex melioris origo recens seductaque alto cognati retinebat satus iapeto mixtam pluvialibus finxit effigiem moderantum cuncta pronaque spectent animalia os homini sublime erectos tollere fuerat induit ignotas conversa figuras aurea sata aetas vindice nullo sponte lege fidem rectumque colebat poena metusque aberant minantia fixo legebantur supplex turba timebat iudicis sui erant tuti nondum caesa peregrinum viseret montibus liquidas pinus descenderat nullaque mortales praeter norant praecipites oppida fossae tuba derecti aeris flexi galeae ensis militis usu securae peragebant otia gentes inmunis rastroque intacta ullis vomeribus dabat contentique cibis cogente creatis arbuteos fetus montanaque fraga legebant cornaque haerentia mora rubetis deciderant patula iovis arbore glandes ver aeternum placidique tepentibus auris mulcebant zephyri natos fruges inarata renovatus ager gravidis canebat aristis flumina lactis nectaris ibant flavaque de viridi stillabant ilice mella postquam saturno tenebrosa tartara misso mundus subiit argentea deterior fulvo pretiosior antiqui contraxit veris perque hiemes aestusque inaequalis autumnos breve exegit quattuor annum primum fervoribus ustus canduit adstricta pependit subiere domos antra fuerunt frutices vinctae cortice virgae longis cerealia sulcis obruta pressique iugo gemuere tertia post successit aenea saevior horrida promptior arma scelerata duro ferro inrupit peioris aevum nefas fugere pudor verumque fidesque fraudesque dolusque insidiaeque sceleratus habendi vela dabant noverat illos navita prius steterant altis fluctibus ignotis insultavere carinae communemque ceu solis cautus humum signavit mensor segetes alimentaque debita dives poscebatur humus itum viscera quasque recondiderat stygiisque admoverat umbris effodiuntur opes inritamenta malorum iamque ferrum ferroque nocentius prodierat prodit bellum utroque sanguineaque crepitantia vivitur ex rapto hospes hospite tutus socer genero gratia rara inminet exitio vir coniugis mariti lurida terribiles miscent aconita novercae filius inquirit annos nymphae calamos tenuisse palustres dumque ibi suspirat motos harundine effecisse sonum tenuem similemque querenti arte vocisque dulcedine captum colloquium tecum dixisse manebit atque disparibus calamis conpagine cerae iunctis nomen puellae talia dicturus omnes subcubuisse supprimit extemplo vocem firmatque soporem languida permulcens medicata falcato nutantem vulnerat ense collo confine saxoque cruentum deicit maculat praeruptam rupem arge iaces tot habebas exstinctum centumque nox occupat excipit volucrisque suae saturnia gemmis caudam stellantibus distulit irae horriferamque animoque obiecit erinyn paelicis argolicae stimulosque caecos condidit profugam exercuit ultimus inmenso restabas nile labori simulac tetigit positisque ripae procubuit genibus resupinoque potuit solos tollens gemitu lacrimis luctisono mugitu visa queri finemque orare conplexus finiat futurum pone metus inquit numquam doloris erit stygias iubet audire paludes ut lenita priores fitque fugiunt e saetae decrescunt artior contrahitur rictus redeunt umerique manusque ungulaque quinos dilapsa absumitur bove superest candor officioque nymphe contenta duorum erigitur metuitque more iuvencae mugiat timide intermissa retemptat nunc linigera colitur celeberrima huic epaphus genitus creditur urbes iuncta templa sole quondam loquentem cedentem phoeboque parente superbum tulit inachides matri demens credis tumidus genitoris falsi erubuit iramque pudore repressit clymenen epaphi convicia quo doleas genetrix liber ferox tacui pudet opprobria nobis potuisse refelli caelesti stirpe creatus ede notam tanti generis meque adsere inplicuit materno meropisque taedasque traderet oravit veri signa precibus phaethontis an ira mota dicti criminis utraque porrexit spectansque iubar insigne coruscis iuro nos auditque videtque spectas temperat satum ficta loquor neget videndum sitque ista novissima longus labor nosse penates oritur contermina nostrae gradere scitabere ipso emicat laetus matris dicta concipit mente aethiopasque suos positosque indos sidereis transit patriosque inpiger`;
const words = loremIpsumString.split(' ').filter((word) => word);
const usedFolderNames = new Set();

function generateName() {
  let name = [];
  // select 1 - 3 words randomly from the array
  const numWords = Math.floor(Math.random() * 3) + 1;
  for (let i = 0; i < numWords; i++) {
    name.push(words[Math.floor(Math.random() * words.length)]);
  }
  name = name.join("-");
  // if the name is used already, try again
  if (usedFolderNames.has(name)) {
    // lazy, but we'll just try again
    return generateName();
  }
  usedFolderNames.add(name);
  return name;
}


const folderNames = Array.from({ length: numFolders }, generateName);

// for each folder, generate a random number of files
async function generate () {
  for (let i = 0; i < folderNames.length; i++) {
    // create a folder
    const path = "docs/" + folderNames[i];
    fs.mkdirSync(path);

    // if this is the first folder, and the division isn't even, add the remainder
    const filesPerFolder = Math.floor(numFiles / numFolders) + (i < numFiles % numFolders ? 1 : 0);
    // for each file, generate a random name and content
    for (let j = 0; j < filesPerFolder; j++) {
        // fetch the markdown content from the API using fetch
        const fileContent = await (await fetch('https://jaspervdj.be/lorem-markdownum/markdown.txt?no-external-links=on&fenced-code-blocks=on')).text();
          // be nice to APIs
        await new Promise((resolve) => setTimeout(resolve, 1000));

        const fileName = generateName();
        fs.writeFileSync("docs/" + folderNames[i] + "/" + fileName + '.md', fileContent);

        console.log(`Created ${path}/${fileName}.md, remaining: ${numFiles - (i * filesPerFolder + j)}`);
    }
  }
}

generate();